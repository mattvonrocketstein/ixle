{%extends "search.html"%}

{%block query_helo%}
<table width=100%>
  <tr><td>
      Browsing: "<i><span id=dir_view_widget>{{query}}</span></i>"
    </td>
    <td align=right>
      <small>sandwich | taco |
        <a href="/api?action=kill_directory&_={{query}}">kill directory</a>
      </small>
    </td>
  </tr>
</table>
{%endblock%}

{% block body %}
{%if subddirs%}
<div style="width:100%">
  <strong>Directories under this one:</strong>
  <div style="margin-left:15px;"
       {%for name,fullpath in subddirs%}
       <small>
         <a href="/browser?_={{fullpath}}">{{name}}</a>
       </small>
       <strong>|</strong>
       {%endfor%}
</div>
</div>
<hr/>
{%endif%}
{{super()}}
{%endblock%}

{%block footer_left%}

<table>
  <tr>
    <td><strong>run:</strong></td>
    <td>
      {%for agent in agent_types%}
      <a href="/spawn?agent={{agent}}&path={{query}}">{{agent}}</a>
      <strong>|</strong>
      {%endfor%}
    </td>
  <tr>
  <tr>
    <td><strong>force-run:</strong></td>
    <td>
      {%for agent in agent_types%}
      <a href="/spawn?force=1&agent={{agent}}&path={{query}}">{{agent}}</a>
      <strong>|</strong>{%endfor%}
    </td>
  <tr>
</table>

<script>
  {%with abspath=query%}{%include "javascript/dir_view_widget.js"%}{%endwith%}
</script>
{%endblock%}
