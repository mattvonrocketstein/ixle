{%extends "layout.html"%}

{%block body%}
<script type="text/javascript">anylinkmenu.init("menuanchorclass")</script>


<script>{%include "javascript/base.js"%}</script>
<br/><strong>current mounts (fuse):</strong><hr/>
<small>
  {% for line in all_mounts%}{{line}}<br/>{%endfor%}
</small>

<b>Remote hosts</b>
<hr/>
{%for remote in remotes %}
<script type="text/javascript">
  //<![CDATA[
var anylinkmenu{{loop.index}} = {divclass:'anylinkmenucols', inlinestyle:'', linktarget:'secwin'} //Third menu variable. Same precaution.
anylinkmenu{{loop.index}}.cols={divclass:'column', inlinestyle:''} //menu.cols if defined creates columns of menu links segmented by keyword "efc"
anylinkmenu{{loop.index}}.items=[

    ["<b>Details for {{remote.nickname}}</b><hr/>", "#"],
    ["mount-point: {{remote.mountpoint}}","#"],
    ["mounted? {{remote.is_mounted}}", "#"],
    ["search","/search?_={{remote.mount_point}}"],
    {%if not remote.is_mounted%}
    ["mount it","{{this_url}}?&mount={{remote.nickname}}"]
    {%else%}
    ["unmount it","{{this_url}}?&umount={{remote.nickname}}"]
    {%endif%}
]

    //]]>
</script>

<table width=100%>
  <tr>
    <td align=left>
      <a href="" class="menuanchorclass"
         rel="anylinkmenu{{loop.index}}" rev="lr">
        <b><u>{{remote.nickname}}</b></u><br/>
      </a>
    </td>
    <td align=right>
      {%with nickname=remote.nickname%}
      {%include "remotes_form.html"%}
      {%endwith%}
    </td>
  </tr>
</table>
{%endfor%}

{%if not detail%}
<hr/><b>New remote host</b>
{%with nickname="NEWENTRY"%}
{%with remote=empty%}
{%include "remotes_form.html"%}
{%endwith%}
{%endwith%}
{%endif%}

{%endblock%}
